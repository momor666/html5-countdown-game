<!doctype html>
<html>
<head>
<meta charset=utf8>
<style>
body {
    background: black;
}
#start {
    color: white;
    font-size: 4em;
}
</style>
</head>
<body>
<table>
    <tr>
        <td><img id="i11" src="light-grey.png"></td>
        <td><img id="i21" src="light-grey.png"></td>
        <td><img id="i31" src="light-grey.png"></td>
        <td><img id="i41" src="light-grey.png"></td>
    </tr>
    <tr>
        <td><img id="i12" src="light-grey.png"></td>
        <td><img id="i22" src="light-grey.png"></td>
        <td><img id="i32" src="light-grey.png"></td>
        <td><img id="i42" src="light-grey.png"></td>
    </tr>
</table>
<p id="start">PRESS AND HOLD TO START</p>
<script>
var start = document.getElementById("start");
var begin = 0;
var imgs = {};
var ti;
var imgels = document.getElementsByTagName("img");
for (var i=0; i<imgels.length; i++) { imgs[imgels[i].id] = imgels[i]; }
start.onmousedown = function() {
    imgs.i11.src = "light-red.png";
    imgs.i12.src = "light-red.png";
    ti = setTimeout(function() {
        imgs.i21.src = "light-red.png";
        imgs.i22.src = "light-red.png";
        ti = setTimeout(function() {
            imgs.i31.src = "light-red.png";
            imgs.i32.src = "light-red.png";
            ti = setTimeout(function() {
                imgs.i41.src = "light-green.png";
                imgs.i42.src = "light-green.png";
                begin = (new Date()).getTime();
            }, Math.random() * 2000);
        }, Math.random() * 2000);
    }, Math.random() * 2000);
}
start.onmouseup = function() {
    var end = (new Date()).getTime();
    if (begin == 0) {
        console.log("false start!");
        clearTimeout(ti);
    } else {
        console.log("Started in " + (end - begin));
    }
    begin = 0;
    for (var k in imgs) imgs[k].src = "light-grey.png";
}
</script>
</body>
</html>
